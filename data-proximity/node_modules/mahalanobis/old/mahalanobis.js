var x = [4,4,5,2,3,6,9,7,4,5],
    y = [3,7,5,7,9,5,6,2,2,7];

var cov = require("compute-covariance"),
    math = require("mathjs");

var mat = cov(x,y);

//console.log(mat);

var inverted = math.inv(mat);

//console.log(inverted);

var meanX = mean(x),
    meanY = mean(y);

var diffX = x.map(function(d){
  return d - meanX;
});

var diffY = y.map(function(d){
  return d - meanY;
});

var diffXY = diffX.map(function(d,i){
  return [d,diffY[i]];
});

var md = [];

diffXY.forEach(function(xy,i){

  var firstDot = math.multiply(xy,inverted);
  var secondDot = math.multiply(firstDot,xy);
  md.push(Math.sqrt(secondDot));

});

console.log(md);

function mean(arr) {
  return arr.reduce(function(a,b){
    return a + b;
  }) / arr.length;
}
