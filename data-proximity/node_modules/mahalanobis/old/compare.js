var mahalanobis = require("../build/mahalanobis.js");
var child_process = require("child_process");

var temp = [];

var observations = 1 + Math.floor(Math.random() * 12),
    columns = 2 + Math.floor(Math.random() * 5);

for (var i = 0; i < observations; i++) {

  var row = [];

  for (var j = 0; j < columns; j++) {
    row.push(Math.round(Math.random() * 20));
  }

  temp.push(row);

}

//temp = [[4,3],[4,7],[5,5],[2,7],[3,9],[6,5],[9,6],[7,2],[4,2],[5,7]];

temp = [ [ 12, 14, 16, 3, 14, 5 ],
  [ 14, 15, 16, 6, 0, 11 ],
  [ 7, 14, 11, 4, 9, 12 ] ];

console.log(temp);
console.log("JS output:");
console.log(roundTo(mahalanobis(temp), 2));

console.log("Python output:");
child_process.exec("python check2.py \" " + JSON.stringify(temp) + "\"", function(err, stdout, stderr){
  console.log(stdout);
});

function roundTo(arr,places) {

  var pow = Math.pow(10,places);

  return arr.map(function(d){
    return Math.round(d * pow) / pow;
  });

}
